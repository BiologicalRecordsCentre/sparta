<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Occupancy detection models — occDetModel • sparta</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Occupancy detection models — occDetModel"><meta property="og:description" content="Run occupancy detection models as described in Isaac et al, 2014"><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sparta</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.19</span>
      </span>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/sparta_vignette.html">sparta - Species Presence Absence R Trends Analyses</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/BiologicalRecordsCentre/sparta/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Occupancy detection models</h1>
    <small class="dont-index">Source: <a href="https://github.com/BiologicalRecordsCentre/sparta/blob/HEAD/R/occDetModel.r" class="external-link"><code>R/occDetModel.r</code></a></small>
    <div class="hidden name"><code>occDetModel.Rd</code></div>
    </div>
    <div class="ref-description">
    <p>Run occupancy detection models as described in Isaac et al, 2014</p>
    </div>
    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">occDetModel</span><span class="op">(</span></span>
<span>  <span class="va">taxa</span>,</span>
<span>  <span class="va">site</span>,</span>
<span>  <span class="va">survey</span>,</span>
<span>  replicate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  closure_period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  criterion <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  provenance <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rem_aggs_with_missing_regions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  allowSitesMultiRegions <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  species_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">taxa</span><span class="op">)</span>,</span>
<span>  write_results <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  nyr <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n_iterations <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>  burnin <span class="op">=</span> <span class="fl">1500</span>,</span>
<span>  thinning <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  n_chains <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  modeltype <span class="op">=</span> <span class="st">"sparta"</span>,</span>
<span>  regional_codes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  region_aggs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  model.function <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  additional.parameters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  additional.BUGS.elements <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  additional.init.values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  return_data <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>
    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt id="arg-taxa">taxa<a class="anchor" aria-label="anchor" href="#arg-taxa"></a></dt>
<dd><p>A character vector of taxon names, as long as the number of observations.</p></dd>
<dt id="arg-site">site<a class="anchor" aria-label="anchor" href="#arg-site"></a></dt>
<dd><p>A character vector of site names, as long as the number of observations.</p></dd>
<dt id="arg-survey">survey<a class="anchor" aria-label="anchor" href="#arg-survey"></a></dt>
<dd><p>A  vector as long as the number of observations.
This must be a Date if includeJDay = <code>TRUE</code></p></dd>
<dt id="arg-replicate">replicate<a class="anchor" aria-label="anchor" href="#arg-replicate"></a></dt>
<dd><p>An optional vector to identify replicate samples (visits) per survey. Need not be globally unique (e.g can be 1, 2, .. n within surveys)</p></dd>
<dt id="arg-closure-period">closure_period<a class="anchor" aria-label="anchor" href="#arg-closure-period"></a></dt>
<dd><p>An optional vector of integers specifying the closure period.
If <code>FALSE</code> then closure_period will be extracted as the year from the survey.</p></dd>
<dt id="arg-criterion">criterion<a class="anchor" aria-label="anchor" href="#arg-criterion"></a></dt>
<dd><p>Determines whether the model should be run. If an integer then this defines the threshold number of records (50 in Outhwaite et al 2019).
Other options are `EqualWt` or `HighSpec`, which define the application of "rules of thumb" defined in Pocock et al 2019.
Defaults to 1, in which case the model is applied for so long there is a single record of the focal species.</p></dd>
<dt id="arg-provenance">provenance<a class="anchor" aria-label="anchor" href="#arg-provenance"></a></dt>
<dd><p>An optional text string allowing the user to identify the dataset.</p></dd>
<dt id="arg-rem-aggs-with-missing-regions">rem_aggs_with_missing_regions<a class="anchor" aria-label="anchor" href="#arg-rem-aggs-with-missing-regions"></a></dt>
<dd><p>An option which if TRUE will remove all aggregates which contain at least one region with no data.</p></dd>
<dt id="arg-allowsitesmultiregions">allowSitesMultiRegions<a class="anchor" aria-label="anchor" href="#arg-allowsitesmultiregions"></a></dt>
<dd><p>An option that permits sites to be included in more than one region. If `FALSE` then these sites are dropped.</p></dd>
<dt id="arg-species-list">species_list<a class="anchor" aria-label="anchor" href="#arg-species-list"></a></dt>
<dd><p>A character vector of taxa names for which models should be run. This is
optional and by default models will be run for all taxa</p></dd>
<dt id="arg-write-results">write_results<a class="anchor" aria-label="anchor" href="#arg-write-results"></a></dt>
<dd><p>logical, should results be saved to <code>output_dir</code>. This is
recommended since these models can take a long time to run. If <code>TRUE</code> (default)
the results from each species will be saved as an .rdata file once the species
has run. This prevents loss of data should anything go wrong.</p></dd>
<dt id="arg-output-dir">output_dir<a class="anchor" aria-label="anchor" href="#arg-output-dir"></a></dt>
<dd><p>character, the output directory were the output for each taxa will be saved
as .rdata files. This will defualt to the working directory</p></dd>
<dt id="arg-nyr">nyr<a class="anchor" aria-label="anchor" href="#arg-nyr"></a></dt>
<dd><p>numeric, the minimum number of years on which a site must have records for it
to be included in the models</p></dd>
<dt id="arg-n-iterations">n_iterations<a class="anchor" aria-label="anchor" href="#arg-n-iterations"></a></dt>
<dd><p>numeric, An MCMC parameter - The number of interations</p></dd>
<dt id="arg-burnin">burnin<a class="anchor" aria-label="anchor" href="#arg-burnin"></a></dt>
<dd><p>numeric, An MCMC parameter - The length of the burn in</p></dd>
<dt id="arg-thinning">thinning<a class="anchor" aria-label="anchor" href="#arg-thinning"></a></dt>
<dd><p>numeric, An MCMC parameter - The thinning factor</p></dd>
<dt id="arg-n-chains">n_chains<a class="anchor" aria-label="anchor" href="#arg-n-chains"></a></dt>
<dd><p>numeric, an MCMC parameter - The number of chains to be run</p></dd>
<dt id="arg-modeltype">modeltype<a class="anchor" aria-label="anchor" href="#arg-modeltype"></a></dt>
<dd><p>A character string or vector that specifies the model to use. See details. If
used then model.function is ignored.</p></dd>
<dt id="arg-regional-codes">regional_codes<a class="anchor" aria-label="anchor" href="#arg-regional-codes"></a></dt>
<dd><p>A data.frame object detailing which site is associated with which region.
each row desginates a site and each column represents a region. The first column represents the
site name (as in <code>site</code>). Subsequent columns are named for each regions with 1 representing
the site is in that region and 0 that it is not. NOTE a site should only be in one region</p></dd>
<dt id="arg-region-aggs">region_aggs<a class="anchor" aria-label="anchor" href="#arg-region-aggs"></a></dt>
<dd><p>A named list giving aggregations of regions that you want trend
estimates for. For example <code>region_aggs = list(GB = c('england', 'scotland', 'wales'))</code>
will produced a trend for GB (Great Britain) as well as its constituent nations. Note that
'england', scotland' and 'wales' must appear as names of columns in <code>regional_codes</code>.
More than one aggregate can be given, eg <code>region_aggs = list(GB = c('england', 'scotland',
 'wales'), UK = c('england', 'scotland', 'wales', 'northern_ireland'))</code>.</p></dd>
<dt id="arg-model-function">model.function<a class="anchor" aria-label="anchor" href="#arg-model-function"></a></dt>
<dd><p>optionally a user defined BUGS model coded as a function (see <code>?jags</code>,
including the example there, for how this is done)</p></dd>
<dt id="arg-max-year">max_year<a class="anchor" aria-label="anchor" href="#arg-max-year"></a></dt>
<dd><p>numeric, final year to which analysis will be run, this can be set if it is beyond
the limit of the dataset.  Defaults to final year of the dataset.</p></dd>
<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>numeric, uses <code>set.seed</code> to set the randon number seed. Setting
this number ensures repeatabl analyses</p></dd>
<dt id="arg-additional-parameters">additional.parameters<a class="anchor" aria-label="anchor" href="#arg-additional-parameters"></a></dt>
<dd><p>A character vector of additional parameters to monitor</p></dd>
<dt id="arg-additional-bugs-elements">additional.BUGS.elements<a class="anchor" aria-label="anchor" href="#arg-additional-bugs-elements"></a></dt>
<dd><p>A named list giving additioanl bugs elements passed
to <code><a href="https://rdrr.io/pkg/R2jags/man/jags.html" class="external-link">R2jags::jags</a></code> 'data' argument</p></dd>
<dt id="arg-additional-init-values">additional.init.values<a class="anchor" aria-label="anchor" href="#arg-additional-init-values"></a></dt>
<dd><p>A named list giving user specified initial values to
be added to the defaults.</p></dd>
<dt id="arg-return-data">return_data<a class="anchor" aria-label="anchor" href="#arg-return-data"></a></dt>
<dd><p>Logical, if <code>TRUE</code> (default) the bugs data object is returned with the data</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
<p>A list of occDet objects (see occDetFunc), as an occDetList class of object</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function requires both the R package R2jags and the program JAGS.
These are not installed by default when sparta is loaded and so should be
installed by the user. More details can be found in the vignette.</p>
<p><code>modeltype</code> is used to choose the model as well as the associated initial values,
and parameters to monitor. Elements to choose from can be separated into the following components:</p>
<p>A. Prior type: this has 3 options, each of which was tested in Outhwaite et al (in review):
  1. sparta - This uses the same model as in Isaac et al (2014).
  2. indran - This is the adaptive stationary model.
  3. ranwalk - This is the random walk model.</p>
<p>B. Hyperprior type: This has 3 options, each of these are discussed in Outhwaite et al (in review):
  1. halfuniform - the original formulation in Isaac et al (2014).
  2. halfcauchy - preferred form, tested in Outhwaite et al (in review).
  3. inversegamma - alternative form presented in the literature.</p>
<p>C. List length specification:  This has 3 options:
  1. catlistlength - list length as a categorical variable.
  2. contlistlength - list length as a continuous variable.
  3. nolistlength - no list length variable.</p>
<p>D. Julian date: this is an additional option for including Julian date within the detection model:
  1. jul_date.</p>
<p>Not all combinations are available in sparta. You will get an error if you try and use
a combination that is not supported. There is usually a good reason why that
combination is not a good idea. Here are the model elements available:</p>
<ul><li><p><code>"sparta"</code> - This uses the same model as in Isaac et al (2014).</p></li>
<li><p><code>"indran"</code> - Here the prior for the year effect of the state model is modelled as a random effect. This allows the model to adapt to interannual variability.</p></li>
<li><p><code>"ranwalk"</code> - Here the prior for the year effect of the state model is modelled as a random walk. Each estimate for the year effect is dependent on that of the previous year.</p></li>
<li><p><code>"halfcauchy"</code> - Includes half-Cauchy hyperpriors for all random effects within the model. The half-Cauchy is a special case of the Student’s t distribution with 1 degree of freedom.</p></li>
<li><p><code>"inversegamma"</code> - Includes inverse-gamma hyperpriors for random effects within the model.</p></li>
<li><p><code>"catlistlength"</code> - This specifies that list length should be considered as a categorical variable. There are 3 classes: lists of length 1, 2-3, and 4 and over. If none of the list length options are specified, 'contlistlength' is used.</p></li>
<li><p><code>"contlistlength"</code> - This specifies that list length should be considered as a continuous variable. If none of the list length options are specified, 'contlistlength' is used.</p></li>
<li><p><code>"nolistlength"</code> - This specifies that no list length should be used. If none of the list length options are specified, 'contlistlength' is used.</p></li>
<li><p><code>"jul_date"</code> - This adds Julian date to the model as a normal distribution with its mean and standard deviation as monitored parameters.</p></li>
<li><p><code>"intercept"</code> - No longer available. Includes an intercept term in the state and observation model. By including intercept terms, the occupancy and detection probabilities in each year are centred on an overall mean level.</p></li>
<li><p><code>"centering"</code> - No longer available. Includes hierarchical centering of the model parameters. Centering does not change the model explicitly but writes it in a way that allows parameter estimates to be updated simultaneously.</p></li>
</ul><p>These options are provided as a vector of characters, e.g. <code>modeltype = c('indran', 'halfcauchy', 'catlistlength')</code></p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Isaac, N.J.B., van Strien, A.J., August, T.A., de Zeeuw, M.P. and Roy, D.B. (2014).
            Statistics for citizen science: extracting signals of change from noisy ecological data.
            <em>Methods in Ecology and Evolution</em>, 5: 1052-1060.</p>
<p>Outhwaite, C.L., Chandler, R.E., Powney, G.D., Collen, B., Gregory, R.D. &amp; Isaac, N.J.B. (2018).
            Prior specification in Bayesian occupancy modelling improves analysis of species occurrence data.
            <em>Ecological Indicators</em>, 93: 333-343.</p>
<p>Isaac, N.J.B., van Strien, A.J., August, T.A., de Zeeuw, M.P. and Roy, D.B. (2014).
            Statistics for citizen science: extracting signals of change from noisy ecological data.
            <em>Methods in Ecology and Evolution</em>, 5: 1052-1060.</p>
<p>Outhwaite, C.L., Chandler, R.E., Powney, G.D., Collen, B., Gregory, R.D. &amp; Isaac, N.J.B. (2018).
            Prior specification in Bayesian occupancy modelling improves analysis of species occurrence data.
            <em>Ecological Indicators</em>, 93: 333-343.</p>
    </div>
    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">125</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">15000</span> <span class="co">#size of dataset</span></span></span>
<span class="r-in"><span><span class="va">nyr</span> <span class="op">&lt;-</span> <span class="fl">20</span> <span class="co"># number of years in data</span></span></span>
<span class="r-in"><span><span class="va">nSamples</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="co"># set number of dates</span></span></span>
<span class="r-in"><span><span class="va">nSites</span> <span class="op">&lt;-</span> <span class="fl">50</span> <span class="co"># set number of sites</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create somes dates</span></span></span>
<span class="r-in"><span><span class="va">first</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strptime</a></span><span class="op">(</span><span class="st">"1980/01/01"</span>, <span class="st">"%Y/%m/%d"</span><span class="op">)</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">last</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strptime</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fl">1980</span><span class="op">+</span><span class="op">(</span><span class="va">nyr</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>,<span class="st">"/12/31"</span>, sep<span class="op">=</span><span class="st">''</span><span class="op">)</span>, <span class="st">"%Y/%m/%d"</span><span class="op">)</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="va">last</span><span class="op">-</span><span class="va">first</span> </span></span>
<span class="r-in"><span><span class="va">rDates</span> <span class="op">&lt;-</span> <span class="va">first</span> <span class="op">+</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">nSamples</span><span class="op">)</span><span class="op">*</span><span class="va">dt</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># taxa are set as random letters</span></span></span>
<span class="r-in"><span><span class="va">taxa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span>, size <span class="op">=</span> <span class="va">n</span>, <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># three sites are visited randomly</span></span></span>
<span class="r-in"><span><span class="va">site</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">'A'</span>, <span class="fl">1</span><span class="op">:</span><span class="va">nSites</span>, sep<span class="op">=</span><span class="st">''</span><span class="op">)</span>, size <span class="op">=</span> <span class="va">n</span>, <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the date of visit is selected at random from those created earlier</span></span></span>
<span class="r-in"><span><span class="va">survey</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">rDates</span>, size <span class="op">=</span> <span class="va">n</span>, <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># run the model with these data for one species</span></span></span>
<span class="r-in"><span><span class="co"># using defaults</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">occDetModel</span><span class="op">(</span>taxa <span class="op">=</span> <span class="va">taxa</span>,</span></span>
<span class="r-in"><span>                       site <span class="op">=</span> <span class="va">site</span>,</span></span>
<span class="r-in"><span>                       survey <span class="op">=</span> <span class="va">survey</span>,</span></span>
<span class="r-in"><span>                       species_list <span class="op">=</span> <span class="st">'a'</span>,</span></span>
<span class="r-in"><span>                       write_results <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                       n_iterations <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>                       burnin <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                       thinning <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>                       </span></span>
<span class="r-in"><span><span class="co"># run with a different model type</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">occDetModel</span><span class="op">(</span>taxa <span class="op">=</span> <span class="va">taxa</span>,</span></span>
<span class="r-in"><span>                       site <span class="op">=</span> <span class="va">site</span>,</span></span>
<span class="r-in"><span>                       survey <span class="op">=</span> <span class="va">survey</span>,</span></span>
<span class="r-in"><span>                       species_list <span class="op">=</span> <span class="st">'a'</span>,</span></span>
<span class="r-in"><span>                       write_results <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                       n_iterations <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>                       burnin <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                       thinning <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                       seed <span class="op">=</span> <span class="fl">125</span>, </span></span>
<span class="r-in"><span>                       modeltype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"indran"</span>, <span class="st">"intercept"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>                       </span></span>
<span class="r-in"><span><span class="co"># run with regions</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create region definitions</span></span></span>
<span class="r-in"><span><span class="va">regions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>site <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">site</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      region1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">20</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      region2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">15</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      region3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">15</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">occDetModel</span><span class="op">(</span>taxa <span class="op">=</span> <span class="va">taxa</span>,</span></span>
<span class="r-in"><span>                       site <span class="op">=</span> <span class="va">site</span>,</span></span>
<span class="r-in"><span>                       survey <span class="op">=</span> <span class="va">survey</span>,</span></span>
<span class="r-in"><span>                       species_list <span class="op">=</span> <span class="st">'a'</span>,</span></span>
<span class="r-in"><span>                       write_results <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                       n_iterations <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>                       burnin <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                       thinning <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                       seed <span class="op">=</span> <span class="fl">125</span>, </span></span>
<span class="r-in"><span>                       modeltype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"indran"</span>, <span class="st">"intercept"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       regional_codes <span class="op">=</span> <span class="va">regions</span>,</span></span>
<span class="r-in"><span>                       region_aggs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>agg1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'region1'</span>, <span class="st">'region2'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>       </span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>
      <footer><div class="copyright">
  <p></p><p>Developed by Nick Isaac, Tom August, Dylan Carbone, Colin Harrower, Jack Hatfield, Mark Hill, Francesca Mancini, Charlie Outhwaite, Gary Powney.</p>
</div>
<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>
      </footer></div>
  </body></html>

